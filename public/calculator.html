<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lions Share FCU Rate Comparison Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            width: 100%;
            overflow-x: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f9fafb;
        }
        
        .calculator-container {
            min-height: 100vh;
            width: 100%;
            padding: 0;
            margin: 0;
        }
        
        /* Remove any default margins/padding from Tailwind */
        .no-margin * {
            margin: 0 !important;
        }
    </style>
</head>
<body>
    <div id="calculator-root" class="calculator-container"></div>
    
    <script type="module">
        // Embedded calculator component
        const RATE_COLORS = [
            '#3B82F6', '#10B981', '#F59E0B', '#EF4444', 
            '#8B5CF6', '#06B6D4', '#F97316', '#84CC16'
        ];

        const LIONS_SHARE_RATES = [
            { name: '6 Month Certificate', termMonths: 6, rate: 3.78, apy: 3.85 },
            { name: '18 Month Certificate', termMonths: 18, rate: 3.99, apy: 4.05 },
            { name: '36 Month Certificate', termMonths: 36, rate: 3.8, apy: 3.85 },
            { name: '48 Month Certificate', termMonths: 48, rate: 3.5, apy: 3.55 },
            { name: 'Save-To-Win Certificate', termMonths: 12, rate: 3.5, apy: 3.55 },
            { name: 'Add-On Certificate', termMonths: 12, rate: 3.99, apy: 4.05 },
            { name: 'Bump-Up Certificate', termMonths: 24, rate: 3.7, apy: 3.75 },
            { name: 'Mini Jumbo Certificate', termMonths: 60, rate: 3.5, apy: 3.55 },
        ];

        class Calculator {
            constructor() {
                this.principal = '10000';
                this.termMonths = '12';
                this.rates = [
                    {
                        id: '1',
                        institutionName: 'Lions Share FCU',
                        rate: 3.99,
                        apy: 4.05,
                        color: RATE_COLORS[0]
                    },
                    {
                        id: '2',
                        institutionName: 'Bank A',
                        rate: 3.50,
                        apy: 3.56,
                        color: RATE_COLORS[1]
                    }
                ];
                this.render();
            }

            calculateEarnings(principal, apy, termMonths) {
                const monthlyRate = apy / 100 / 12;
                let currentBalance = principal;
                
                for (let month = 1; month <= termMonths; month++) {
                    currentBalance = currentBalance * (1 + monthlyRate);
                }
                
                const maturityValue = Number(currentBalance.toFixed(2));
                const interestEarned = Number((maturityValue - principal).toFixed(2));
                
                return { interestEarned, maturityValue };
            }

            getResults() {
                const principalAmount = parseFloat(this.principal.replace(/,/g, '')) || 0;
                const term = parseInt(this.termMonths) || 0;
                
                if (principalAmount <= 0 || term <= 0 || this.rates.length === 0) {
                    return null;
                }
                
                const calculations = {};
                this.rates.forEach(rate => {
                    calculations[rate.id] = this.calculateEarnings(principalAmount, rate.apy, term);
                });
                
                return {
                    principal: principalAmount,
                    termMonths: term,
                    rates: this.rates,
                    calculations
                };
            }

            formatCurrency(amount) {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(amount);
            }

            formatNumber(num) {
                return num.toLocaleString('en-US');
            }

            handlePrincipalChange(value) {
                const cleanValue = value.replace(/[^\d]/g, '');
                this.principal = cleanValue ? parseInt(cleanValue).toLocaleString() : '';
                this.render();
            }

            addRate() {
                if (this.rates.length < RATE_COLORS.length) {
                    const newRate = {
                        id: Date.now().toString(),
                        institutionName: `Institution ${this.rates.length + 1}`,
                        rate: 3.00,
                        apy: 3.04,
                        color: RATE_COLORS[this.rates.length]
                    };
                    this.rates.push(newRate);
                    this.render();
                }
            }

            removeRate(id) {
                if (this.rates.length > 1) {
                    this.rates = this.rates.filter(rate => rate.id !== id);
                    this.render();
                }
            }

            updateRate(id, field, value) {
                this.rates = this.rates.map(rate => 
                    rate.id === id ? { ...rate, [field]: value } : rate
                );
                this.render();
            }

            render() {
                const results = this.getResults();
                const bestRate = results ? this.rates.reduce((best, current) => 
                    results.calculations[current.id].interestEarned > results.calculations[best.id].interestEarned ? current : best
                ) : null;
                const worstRate = results ? this.rates.reduce((worst, current) => 
                    results.calculations[current.id].interestEarned < results.calculations[worst.id].interestEarned ? current : worst
                ) : null;
                const difference = results && bestRate && worstRate ? 
                    results.calculations[bestRate.id].interestEarned - results.calculations[worstRate.id].interestEarned : 0;

                document.getElementById('calculator-root').innerHTML = `
                    <div class="w-full min-h-screen bg-gray-50 p-4 lg:p-6">
                        <!-- Header -->
                        <div class="text-center mb-6">
                            <h1 class="text-2xl lg:text-3xl font-bold text-gray-800 mb-2">Certificate Rate Comparison Calculator</h1>
                            <p class="text-gray-600 text-sm lg:text-base">Compare certificate rates to see potential earnings differences</p>
                        </div>

                        <!-- Input Section -->
                        <div class="bg-white rounded-lg shadow-md p-4 lg:p-6 mb-6">
                            <h2 class="text-lg lg:text-xl font-semibold text-gray-800 mb-4">Comparison Settings</h2>

                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 mb-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Initial Deposit Amount</label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">$</span>
                                        <input
                                            type="text"
                                            value="${this.principal}"
                                            onchange="calculator.handlePrincipalChange(this.value)"
                                            class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg text-lg font-semibold focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
                                            placeholder="10,000"
                                        />
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Certificate Term (Months)</label>
                                    <select
                                        value="${this.termMonths}"
                                        onchange="calculator.termMonths = this.value; calculator.render();"
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg text-lg font-semibold focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"
                                    >
                                        <option value="3">3 Months</option>
                                        <option value="6">6 Months</option>
                                        <option value="9">9 Months</option>
                                        <option value="12">12 Months</option>
                                        <option value="18">18 Months</option>
                                        <option value="24">24 Months</option>
                                        <option value="36">36 Months</option>
                                        <option value="48">48 Months</option>
                                        <option value="60">60 Months</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Rates Input -->
                            <div>
                                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
                                    <h3 class="text-lg font-semibold text-gray-800">Institution Rates</h3>
                                    <button
                                        onclick="calculator.addRate()"
                                        ${this.rates.length >= RATE_COLORS.length ? 'disabled' : ''}
                                        class="px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm"
                                    >
                                        + Add Rate
                                    </button>
                                </div>

                                <div class="space-y-4">
                                    ${this.rates.map((rate, index) => `
                                        <div class="flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-4 p-4 border border-gray-200 rounded-lg">
                                            <div 
                                                class="w-4 h-4 rounded-full flex-shrink-0"
                                                style="background-color: ${rate.color}"
                                            ></div>
                                            
                                            <div class="flex-1 grid grid-cols-1 gap-4">
                                                <input
                                                    type="text"
                                                    value="${rate.institutionName}"
                                                    onchange="calculator.updateRate('${rate.id}', 'institutionName', this.value)"
                                                    class="px-3 py-2 border border-gray-300 rounded focus:border-blue-500 focus:outline-none"
                                                    placeholder="Institution Name"
                                                />
                                                
                                                ${rate.institutionName === 'Lions Share FCU' ? `
                                                    <div>
                                                        <select
                                                            onchange="
                                                                const selectedRate = ${JSON.stringify(LIONS_SHARE_RATES)}.find(r =>
                                                                    r.rate + '-' + r.apy === this.value
                                                                );
                                                                if (selectedRate) {
                                                                    calculator.updateRate('${rate.id}', 'rate', selectedRate.rate);
                                                                    calculator.updateRate('${rate.id}', 'apy', selectedRate.apy);
                                                                    calculator.termMonths = selectedRate.termMonths.toString();
                                                                    calculator.render();
                                                                }
                                                            "
                                                            class="w-full px-3 py-2 border border-gray-300 rounded focus:border-blue-500 focus:outline-none text-sm"
                                                        >
                                                            <option value="">Select a Lions Share Certificate</option>
                                                            ${LIONS_SHARE_RATES.map(lsRate => {
                                                                const optionValue = lsRate.rate + '-' + lsRate.apy;
                                                                const currentValue = rate.rate + '-' + rate.apy;
                                                                const isSelected = optionValue === currentValue;
                                                                return `
                                                                <option value="${optionValue}" ${isSelected ? 'selected' : ''}>
                                                                    ${lsRate.name} - ${lsRate.rate}% Rate / ${lsRate.apy}% APY (${lsRate.termMonths} mo)
                                                                </option>
                                                            `}).join('')}
                                                        </select>
                                                    </div>
                                                ` : `
                                                    <div class="grid grid-cols-2 gap-4">
                                                        <div class="relative">
                                                            <input
                                                                type="number"
                                                                step="0.01"
                                                                value="${rate.rate}"
                                                                onchange="calculator.updateRate('${rate.id}', 'rate', parseFloat(this.value) || 0)"
                                                                class="w-full px-3 py-2 pr-8 border border-gray-300 rounded focus:border-blue-500 focus:outline-none"
                                                                placeholder="Rate"
                                                            />
                                                            <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm">%</span>
                                                        </div>
                                                        
                                                        <div class="relative">
                                                            <input
                                                                type="number"
                                                                step="0.01"
                                                                value="${rate.apy}"
                                                                onchange="calculator.updateRate('${rate.id}', 'apy', parseFloat(this.value) || 0)"
                                                                class="w-full px-3 py-2 pr-12 border border-gray-300 rounded focus:border-blue-500 focus:outline-none"
                                                                placeholder="APY"
                                                            />
                                                            <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm">APY</span>
                                                        </div>
                                                    </div>
                                                `}
                                            </div>

                                            ${this.rates.length > 1 ? `
                                                <button
                                                    onclick="calculator.removeRate('${rate.id}')"
                                                    class="p-2 text-red-600 hover:text-red-800 transition-colors self-start lg:self-center"
                                                >
                                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                    </svg>
                                                </button>
                                            ` : ''}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>

                        ${results ? `
                            <!-- Summary Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6">
                                <div class="bg-white rounded-lg shadow-md p-4 lg:p-6 text-center">
                                    <div class="text-xl lg:text-2xl font-bold text-blue-700 mb-2">
                                        ${this.formatCurrency(results.principal)}
                                    </div>
                                    <div class="text-sm text-gray-600">Initial Deposit</div>
                                </div>

                                <div class="bg-white rounded-lg shadow-md p-4 lg:p-6 text-center">
                                    <div class="text-xl lg:text-2xl font-bold text-emerald-700 mb-2">
                                        ${results.termMonths} months
                                    </div>
                                    <div class="text-sm text-gray-600">Certificate Term</div>
                                </div>

                                <div class="bg-white rounded-lg shadow-md p-4 lg:p-6 text-center">
                                    <div class="text-xl lg:text-2xl font-bold text-purple-700 mb-2">
                                        ${this.formatCurrency(difference)}
                                    </div>
                                    <div class="text-sm text-gray-600">Potential Extra Earnings</div>
                                </div>
                            </div>

                            <!-- Comparison Results -->
                            <div class="bg-white rounded-lg shadow-md p-4 lg:p-6 mb-6">
                                <h3 class="text-lg lg:text-xl font-semibold text-gray-800 mb-6">Earnings Comparison</h3>

                                <div class="space-y-4">
                                    ${this.rates
                                        .sort((a, b) => results.calculations[b.id].interestEarned - results.calculations[a.id].interestEarned)
                                        .map((rate, index) => {
                                            const calc = results.calculations[rate.id];
                                            const isBest = rate.id === bestRate?.id;
                                            const isWorst = rate.id === worstRate?.id;
                                            
                                            return `
                                                <div class="p-4 rounded-lg border-2 ${
                                                    isBest ? 'border-emerald-500 bg-emerald-50' : 
                                                    isWorst ? 'border-red-300 bg-red-50' : 
                                                    'border-gray-200 bg-gray-50'
                                                }">
                                                    <div class="flex flex-col lg:flex-row lg:items-center justify-between space-y-4 lg:space-y-0">
                                                        <div class="flex items-center space-x-3">
                                                            <div 
                                                                class="w-4 h-4 rounded-full flex-shrink-0"
                                                                style="background-color: ${rate.color}"
                                                            ></div>
                                                            <div>
                                                                <div class="flex items-center space-x-2">
                                                                    <h4 class="font-semibold text-gray-800">${rate.institutionName}</h4>
                                                                    ${isBest ? '<span class="text-emerald-600">🏆</span>' : ''}
                                                                </div>
                                                                <div class="text-sm text-gray-600">
                                                                    ${rate.rate.toFixed(2)}% Rate • ${rate.apy.toFixed(2)}% APY
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="text-right">
                                                            <div class="grid grid-cols-2 gap-4 lg:gap-6">
                                                                <div>
                                                                    <div class="text-base lg:text-lg font-bold text-emerald-700">
                                                                        ${this.formatCurrency(calc.interestEarned)}
                                                                    </div>
                                                                    <div class="text-xs text-gray-500">Interest Earned</div>
                                                                </div>
                                                                <div>
                                                                    <div class="text-base lg:text-lg font-bold text-blue-700">
                                                                        ${this.formatCurrency(calc.maturityValue)}
                                                                    </div>
                                                                    <div class="text-xs text-gray-500">Maturity Value</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    ${!isBest && bestRate ? `
                                                        <div class="mt-2 pt-2 border-t border-gray-200">
                                                            <div class="text-sm text-gray-600">
                                                                You could earn <span class="font-semibold text-red-600">
                                                                    ${this.formatCurrency(results.calculations[bestRate.id].interestEarned - calc.interestEarned)} more
                                                                </span> with the best rate
                                                            </div>
                                                        </div>
                                                    ` : ''}
                                                </div>
                                            `;
                                        }).join('')}
                                </div>
                            </div>

                            ${bestRate && worstRate && difference > 0 ? `
                                <!-- Key Insights -->
                                <div class="bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg p-4 lg:p-6 border border-emerald-200">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-3">💡 Key Insights</h3>
                                    <div class="space-y-2 text-gray-700 text-sm lg:text-base">
                                        <p>
                                            • <strong>${bestRate.institutionName}</strong> certificate would earn <strong>${this.formatCurrency(difference)} more</strong> than <strong>${worstRate.institutionName}</strong> certificate
                                        </p>
                                        <p>
                                            • Show members how they could earn <strong>${this.formatCurrency(difference)} more</strong> by choosing Lions Share FCU over competitors
                                        </p>
                                        <p>
                                            • Use this <strong>${((difference / results.calculations[worstRate.id].interestEarned) * 100).toFixed(1)}%</strong> earnings advantage as a selling point to attract new members
                                        </p>
                                    </div>
                                </div>
                            ` : ''}
                        ` : ''}
                    </div>
                `;
            }
        }

        // Initialize calculator
        window.calculator = new Calculator();
    </script>
</body>
</html>